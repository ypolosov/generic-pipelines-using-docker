version: '3.9'

volumes:
  jenkins-home:

services:
  jenkins:
    image: jenkins/jenkins:lts
    privileged: true
    user: root
    ports:
     - 8080:8080
     - 50000:50000
    container_name: jenkins
    volumes:
     - jenkins-home:/var/jenkins_home
     - /var/run/docker.sock:/var/run/docker.sock
  
  agent:
    image: jenkins/ssh-agent:jdk11
    privileged: true
    user: root
    container_name: agent
    expose:
      - 22
    environment:
      - JENKINS_AGENT_SSH_PUBKEY=ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC82kDzNwTjZTqElU/FmuWn/m5yme8wT7EAOC5AQgjT/WDxoZw0w/MS/kbv0tgrCczjRIzIBBjOljvRj9oyiCHr21Jrq6NYh7dxnb0/NWxoesP8BJljBiqLj3V9SgwmhCe7N26jLTs9dFxldyoTWfJiMmnYf+vizzR3DLl9/GKbWmUmh4Bcdu7dj/fnPBqPpp23R/nNwgQ1JMEstMHezLT/HWBuQP1ozmnJDdT0JSev0rKMraMYDRfUl7I3Vb860R8GMIim6W0NMs2nYqzQ0uqV3Q2lQWvJh7P6vM8BJLR7rXQIpoS9rL6BTMH8+qeo+WkwSphuMaqhAJvV4nxudvisg3CRXcO4GxFbbh2060k3ZhsC57cmIAWHypDRdr+QOpvv0brHZkEtSm6WabEx3ndjh/+9xyoalnh8RxSF7hOOvkqAudQUH4Sn8VdFGuAn69jtHplWQ5vX/5kIuz0J+Ym4otVzcbtnCIt1i/tY8I5ZmZgIW9jknHk9OUvOa8P7OUM= ypolosov@mainframe
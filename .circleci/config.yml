version: 2.1
jobs:
  pipeline-job:
    docker:
      - image: docker:git
    working_directory: /app
    resource_class: small
    steps:
      - setup_remote_docker:
          docker_layer_caching: true
      - add_ssh_keys:
          fingerprints:
            - "68:57:52:54:24:68:1c:45:ce:95:57:f3:ef:de:23:9a"
      - run:
          name: Clone
          command: |
            git clone https://github.com/ypolosov/generic-pipelines-using-docker.git
      - run:
          name: Pipeline
          command: |
            pwd
            ls -la
            docker -v
            docker compose -f .devcontainer/docker-compose.yml --env-file app-2/.env run app-2
workflows:
  pipeline-workflow:
    jobs:
      - pipeline-job